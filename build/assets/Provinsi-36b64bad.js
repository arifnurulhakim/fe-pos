import{_ as H,v as J,r as d,m as Q,o as W,G as y,q as X,b as c,c as k,d as g,e as t,f as l,g as i,i as C,t as N,n as I,k as S,p as Z,l as ee}from"./index-61406ec9.js";const v=P=>(Z("data-v-19da2a86"),P=P(),ee(),P),se={class:"grid"},le={class:"col-12"},oe={class:"card"},ae={class:"my-2"},te={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ie=v(()=>t("h5",{class:"m-0"},"Provinsi",-1)),ne={class:"block mt-2 md:mt-0 p-input-icon-left"},re=v(()=>t("i",{class:"pi pi-search"},null,-1)),de=v(()=>t("span",{class:"p-column-title"},"Kode Provinsi",-1)),ue=v(()=>t("span",{class:"p-column-title"},"Nama Provinsi",-1)),ce={class:"field"},ve=v(()=>t("label",{for:"kode_prov"},"Kode Provinsi",-1)),pe={key:0,class:"p-invalid"},me={class:"field"},_e=v(()=>t("label",{for:"nama_provinsi"},"Nama Provinsi",-1)),fe={key:0,class:"p-invalid"},be={class:"flex align-items-center justify-content-center"},he=v(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ye={key:0},ke={class:"flex align-items-center justify-content-center"},ge=v(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Pe={key:0},xe={__name:"Provinsi",setup(P){const _=J(),r=d(null),u=d(!1),b=d(!1),h=d(!1),e=d({}),p=d(null),T=d(null),x=d({}),m=d(!1);Q(()=>{R()}),W(()=>{U()});const U=()=>{y.get("api/provinsi").then(a=>{a.data.status==="success"&&(r.value=a.data.data)}).catch(a=>{console.error(a)})},L=()=>{e.value={},m.value=!1,u.value=!0},M=()=>{u.value=!1,m.value=!1},B=async()=>{if(m.value=!0,e.value.kode_prov&&e.value.nama_provinsi){if(console.log(e.value.id),e.value.id){const a=A(e.value.id);r.value[a]=e.value,await y.put(`/api/provinsi/${e.value.id}`,{nama_provinsi:e.value.nama_provinsi}),_.add({severity:"success",summary:"Successful",detail:"Provinsi Updated",life:3e3}),u.value=!1,e.value={}}else r.value.push(e.value),await y.post("/api/provinsi",{kode_prov:e.value.kode_prov,nama_provinsi:e.value.nama_provinsi}),_.add({severity:"success",summary:"Successful",detail:"Provinsi Created",life:3e3}),u.value=!1,e.value={};u.value=!1,e.value={}}},F=a=>{e.value={...a},console.log(e),u.value=!0},$=a=>{e.value=a,b.value=!0},q=async()=>{try{await y.delete(`/api/provinsi/${e.value.id}`),r.value=r.value.filter(a=>a.id!==e.value.id),b.value=!1,e.value={},_.add({severity:"success",summary:"Successful",detail:"Provinsi Deleted",life:3e3})}catch(a){console.error(a),_.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},A=a=>{let s=-1;for(let f=0;f<r.value.length;f++)if(r.value[f].id===a){s=f;break}return s},z=()=>{T.value.exportCSV()},E=()=>{h.value=!0},K=async()=>{try{const a=p.value.map(s=>s.id);await y.delete("/api/provinsi",{data:{ids:a}}),r.value=r.value.filter(s=>!p.value.includes(s)),h.value=!1,p.value=null,_.add({severity:"success",summary:"Successful",detail:"Provinsis Deleted",life:3e3})}catch(a){console.error(a),_.add({severity:"error",summary:"Error",detail:"An error occurred",life:3e3})}},R=()=>{x.value={global:{value:null,matchMode:X.CONTAINS}}};return(a,s)=>{const f=c("Toast"),n=c("Button"),j=c("FileUpload"),O=c("Toolbar"),D=c("InputText"),w=c("Column"),Y=c("DataTable"),V=c("Dialog");return k(),g("div",se,[t("div",le,[t("div",oe,[l(f),l(O,{class:"mb-4"},{start:i(()=>[t("div",ae,[l(n,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:L}),l(n,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:E,disabled:!p.value||!p.value.length},null,8,["disabled"])])]),end:i(()=>[l(j,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Import",chooseLabel:"Import",class:"mr-2 inline-block"}),l(n,{label:"Export",icon:"pi pi-upload",class:"p-button-help",onClick:s[0]||(s[0]=o=>z(o))})]),_:1}),l(Y,{ref_key:"dt",ref:T,value:r.value,selection:p.value,"onUpdate:selection":s[2]||(s[2]=o=>p.value=o),dataKey:"id",paginator:!0,rows:10,filters:x.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} provinsis",responsiveLayout:"scroll"},{header:i(()=>[t("div",te,[ie,t("span",ne,[re,l(D,{modelValue:x.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=o=>x.value.global.value=o),placeholder:"Search..."},null,8,["modelValue"])])])]),default:i(()=>[l(w,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(w,{field:"kode_prov",header:"kode provinsi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:i(o=>[de,C(" "+N(o.data.kode_prov),1)]),_:1}),l(w,{field:"nama_provinsi",header:"nama provinsi",sortable:!0,headerStyle:"width:40%; min-width:10rem;"},{body:i(o=>[ue,C(" "+N(o.data.nama_provinsi),1)]),_:1}),l(w,{headerStyle:"min-width:10rem;"},{body:i(o=>[l(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>F(o.data)},null,8,["onClick"]),l(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>$(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),l(V,{visible:u.value,"onUpdate:visible":s[5]||(s[5]=o=>u.value=o),style:{width:"450px"},header:"Provinsi Details",modal:!0,class:"p-fluid"},{footer:i(()=>[l(n,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:M}),l(n,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:B})]),default:i(()=>[t("div",ce,[ve,l(D,{id:"kode_prov",modelValue:e.value.kode_prov,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.kode_prov=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:I({"p-invalid":m.value&&!e.value.kode_prov})},null,8,["modelValue","class"]),m.value&&!e.value.kode_prov?(k(),g("small",pe,"Kode Provinsi is required.")):S("",!0)]),t("div",me,[_e,l(D,{id:"nama_provinsi",modelValue:e.value.nama_provinsi,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.nama_provinsi=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:I({"p-invalid":m.value&&!e.value.nama_provinsi})},null,8,["modelValue","class"]),m.value&&!e.value.nama_provinsi?(k(),g("small",fe,"Nama Provinsi is required.")):S("",!0)])]),_:1},8,["visible"]),l(V,{visible:b.value,"onUpdate:visible":s[7]||(s[7]=o=>b.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[l(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[6]||(s[6]=o=>b.value=!1)}),l(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:q})]),default:i(()=>[t("div",be,[he,e.value?(k(),g("span",ye,[C("Are you sure you want to delete "),t("b",null,N(e.value.name),1),C("?")])):S("",!0)])]),_:1},8,["visible"]),l(V,{visible:h.value,"onUpdate:visible":s[9]||(s[9]=o=>h.value=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:i(()=>[l(n,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:s[8]||(s[8]=o=>h.value=!1)}),l(n,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:K})]),default:i(()=>[t("div",ke,[ge,e.value?(k(),g("span",Pe,"Are you sure you want to delete the selected provinsis?")):S("",!0)])]),_:1},8,["visible"])])])])}}},Ce=H(xe,[["__scopeId","data-v-19da2a86"]]);export{Ce as default};
